<html>

<head>
    <meta charset="UTF-8"/>
    <title>我的第一个 HTML 页面</title>
</head>
<script
        src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<body>
<p id="p1">body 元素的内容会显示在浏览器中。</p>
<p id="p2">title 元素的内容会显示在浏览器的标题栏中。汉代散文延续先秦而有再进一步的发展。先秦哲理散文在当代政治、
    经济、社会各方面的具体条件之下而蓬勃兴盛，其所呈现的思想、所阐发的道理，
    也都以现实为触发，两汉政论散文以此为基础，综合儒、道、法三家的思想，更进一步与时代紧密结合，
    发挥经世济民的功能。汉代散文可分史传散文、政论散文和哲理散文三类。史传散文有《史记》及《汉书》；
    政论散文有贾谊《治安策》、《过秦论》、晁错《言兵事疏》、《论贵粟疏》；哲理散文有刘安《淮南子》、
    王充《论衡》等。</p>
<p id="p3">汉代散文延续先秦而有再进一步的发展。先秦哲理散文在当代政治、
    经济、社会各方面的具体条件之下而蓬勃兴盛，其所呈现的思想、所阐发的道理，
    也都以现实为触发，两汉政论散文以此为基础，综合儒、道、法三家的思想，更进一步与时代紧密结合，
    发挥经世济民的功能。汉代散文可分史传散文、政论散文和哲理散文三类。史传散文有《史记》及《汉书》；
    政论散文有贾谊《治安策》、《过秦论》、晁错《言兵事疏》、《论贵粟疏》；哲理散文有刘安《淮南子》、
    王充《论衡》等。</p>

    <p id="p4">贾谊的《论积贮疏》、《过秦论》、《治安策》，鼂错的《言兵事疏》、《论贵粟疏》，
        邹阳的《狱中上梁王书》，桓宽的《盐铁论》，王符的《潜夫论》，
        崔实的《政论》，仲长统的《昌言》，皆是内容丰富、立论精密，语言朴实[7]。
        历史散文一脉，西汉司马迁的《史记》延续《左传》基础而有更宏观的视野[8]，
        它不但是文学和史学的典范之作[9][10]，更是司马迁一生理想、热情的心血结晶[11]，
        后代唐、宋以迄明、清的散文作品，都深受其人、其文的影响[12]，紧接着是东汉班固的《汉书》，
        其书断取西汉一代，对于后代正史之体例有其影响[13]，另外在文字方面，《汉书》与《史记》比较起来，
        喜用古字，尚藻饰，用排偶，已可看出六朝文风的开端，两者交相辉映，构成中国史书的最佳典范[13]。
        其他政论性的散文有王充的《论衡》、仲长统《昌言》、刘邵《人物志》、桓宽《盐铁论》等[7]。</p>

    <P id="p5">先秦、汉代散文，记载、诠释历史，或针砭、议论当代，或为解决问题而出，或为陈述理想而著，
        其动机、其目的本不在文，所以各家散文，各有其特色；这就是唐、宋以来散文作家孜孜以这两个
        时代的散文为典范而大力提倡的基本原因[7]。魏晋[编辑]</p>
<P id="p8">先秦汉代散文记载诠释历史或针砭议论当代或为解决问题而出或为陈述理想而著
    其动机其目的本不在文所以各家散文各有其特色这就是唐宋以来散文作家孜孜以这两个
    时代的散文为典范而大力提倡的基本原因先秦汉代散文记载诠释历史或针砭议论当代或为解决问题而出或为陈述理想而著
    其动机其目的本不在文所以各家散文各有其特色这就是唐宋以来散文作家孜孜以这两个
    时代的散文为典范而大力提倡的基本原因先秦汉代散文记载诠释历史或针砭议论当代或为解决问题而出或为陈述理想而著
    其动机其目的本不在文所以各家散文各有其特色这就是唐宋以来散文作家孜孜以这两个
    时代的散文为典范而大力提倡的基本原因先秦汉代散文记载诠释历史或针砭议论当代或为解决问题而出或为陈述理想而著
    其动机其目的本不在文所以各家散文各有其特色这就是唐宋以来散文作家孜孜以这两个
    时代的散文为典范而大力提倡的基本原因</p>

<div class="details_con">
    <p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_1">　　6月21日，同济大学国际足球学院成立，将依托我校综合办学资源优势，通过强化国际交流与协作、学科交叉与融合，构建本科、研究生完善的足球学科体系，致力于培养具备高度政治思想觉悟和素质、文化、专业技能的精准化足球科学研究人才、国际化足球战略决策人才、集约化足球精英管理人才和复合应用型足球专门人才，推动中国足球高端人才培养规模效应和集约化发展，服务于国家足球振兴发展战略。国际足球学院拟于2018年夏首招本科生和研究生。</p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="000" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245592311003.jpg" width="350" height="250" /></center>
    <p>
        <br/></p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_2">　　国际奥委会副主席、2022年北京冬季奥运会组委会副主席于再清，与中国工程院院士、我校校长钟志华共同为国际足球学院揭牌。国务院足球改革发展部际联席会议办公室常务副主任、中国足球协会副主席李毓毅，教育部学生体育协会联合秘书处秘书长薛彦青，教育部体育卫生与艺术教育司副司长刘培俊分别致辞，并为“同济大学足球智库”揭牌。上海市体育局巡视员郭蓓、我校常务副校长伍江，澳大利亚艾迪斯科文大学副校长约翰.芬利琼斯(John Finlay-Jones)共同为“同济—艾迪斯科文足球运动科学研究中心”揭牌。</p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="微信图片_20170621164322" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245592304968.jpg" width="350" height="250" /></center>
    <p>
        <br/></p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="微信图片_20170621164317" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245592459176.jpg" width="350" height="250"/></center>
    <p>
        <br/></p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_3">　　李毓毅、薛彦青、刘培俊等在致辞中表示，同济大学积极响应我国足球改革发展的时代号召，基于百余年足球教育传统，成立国际足球学院，符合国际趋势、国家战略和社会关切，是推进体教结合、改进足球专业人才培养模式的创新举措，其未来发展值得期待。希望同济大学以国际足球学院的成立为新起点，发挥“同舟共济”精神，着力培养运动技能精湛、体育精神过硬的人才，积极服务于国家足球事业发展和世界一流大学建设，将其建设成为具有中国特色、世界水准，体教融合发展的新标杆。</p>
    <p span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_4">　　我校体育教学部负责人介绍，同济大学国际足球学院定位为独立二级学院，将秉承“创新、协调、绿色、开放、共享”的发展理念，坚持国际化协作、市场化运作的办学方向，实行理事会领导下院长负责制管理模式，立足于当今世界足球发展的前沿和我国足球发展的实际，形成以足球管理、足球经济，足球运动训练、足球科研研究、足球人文社会学等专业方向，办学层次贯穿本科、研究生培养，构建本科、研究生“一体化”的完善足球精英人才培养机制。</p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_5">　　足球运动伴随着我校百余年的办学历程，历史悠久、文化底蕴丰厚，是我校独具特色的传统品牌。早在我校建校初期，就成立了足球队、开设了足球课程，尤其在改革开放后，我校的足球运动获得了蓬勃发展。1979年，我校被命名为上海市第一批“足球传统项目”学校;1985年，我校足球队被教育部授予“高水平运动队”;1987年，我校足球队获 “黄果树杯”第一届全国大学生足球锦标赛冠军;1990年，我校联合部分高校创建中国大学生足球协会，并担任第一届主席挂靠单位;2007年，我校举办第一届亚洲大学生男子足球锦标赛并获冠军;2012年，在上海市政府和教委的倡导和支持下，我校牵头成立“上海市校园足球联盟”，并担任理事长执行单位，大力推广上海市青少年校园足球运动;2013年，我校重新当选中国大学生体育协会足球分会主席挂靠单位;2013年5月，我校成立全国高校第一个足球研究专门机构——同济大学足球研究中心。2014年11月26日，在刘延东副总理主持的全国青少年校园足球工作电视电话会议上，我校时任校长裴钢作为普通高等院校唯一代表，在大会上作总结发言;2016年11月25日，我校时任党委书记杨贤金作为中德校园足球合作杰出代表，随同刘延东副总理为团长的中国代表团，赴德国柏林、科隆等地参加了“中德青少年校园足球论坛”系列活动。</p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_6">　　钟志华表示，发展振兴中国足球已成为国家战略，然而，当前我国足球专业精英人才严重匮乏，已成为制约中国足球事业发展的瓶颈。作为以培养专业精英、社会栋梁为己任的同济大学，积极响应党中央的号召，审时度势，决定成立国际足球学院，旨在进一步发挥上海市足球教育改革在全国的引领和示范作用，继续探索新时期背景下符合国家足球发展战略的国际化现代足球教育体系，为足球精英人才培养和中国足球创新、可持续发展提供成功经验和借鉴，同时也积极助力培养全社会积极向上的足球文化，为上海建设全球著名体育城市注入更多内涵。</p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="微信图片_20170621164305" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245594567829.jpg" width="350" height="250" /></center>
    <p>
        <br/></p>
    <p style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;" id="id_7">　　国际足球学院成立大会由我校党委副书记姜富明主持。当天，出席成立大会的还有我校中德人文交流研究中心主任董琦、上海体育学院副院长毛丽娟、成都大学党委副书记易贤文，清华大学、北京大学、上海交通大学、复旦大学、华南理工大学等兄弟院校负责人，以及原中国国家男子足球队主教练朱广沪，原中国国家女子足球队主教练马元安、马良行，现中国国家男子足球队助理教练李铁，足坛名宿刘庆泉、杨礼敏、李中华、柳海光、范志毅、彭伟国、魏群等。上海中优集团董事长、同济大学校友吴征作为合作方代表发言，表示将为国际足球学院的建设与发展提供全方位支持。</p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="微信图片_20170621164312" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245594497013.jpg" width="350" height="250" /></center>
    <p>
        <br/></p>
    <p>
        <span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">　　</span></p>
    <center>
        <img alt="微信图片_20170621165732" src="https://kaoyan.wanxue.cn/uploadfile/image/20170705/1499245595952431.jpg" width="350" height="250" /></center>
    <p>
        <br/></p>
    </p>
</div>
</body>
<p id="p6"><b>Hello</b> World</p>
<input type="button" value="调用" onclick="testFun()">

<script type="text/javascript">
// 替换指定位置的字符串
String.prototype.replaceAt = function(id, index, replacement) {
    return this.slice(0, index) + '<span style="background:red;color:white;"' + 'id=' + "\"" + id + "_select" + "\"" + '>' + replacement + '</span>'+ this.slice(parseInt(index) + parseInt(replacement.length));
}

// 初始化选中区域
function init(startId, startOffset, endId, endOffset) {
    window.android.testInit(startId, startOffset, endId, endOffset);
    var startElement = document.getElementById(startId);
    var endElement = document.getElementById(endId);

    var range = document.createRange();
	range.setStart(startElement.firstChild, startOffset);
	range.setEnd(endElement.firstChild, endOffset);

    if(startElement == endElement) {// 同一个段落
		var text = range.toString();
		var contents = startElement.innerHTML;
		//startElement.innerHTML = contents.split(text).join('<span style="background:red;color:white;"' + 'id=' + "\"" + startId + "_select" + "\"" + '>' + text + '</span>');
        startElement.innerHTML = contents.replaceAt(startId, startOffset, text);
	} else {
		var clone = range.cloneContents();
		var c = clone.children;
		var count = 0;
		var ids = new Array();
		for (i = 0; i < c.length; i++) {
			console.log(c[i].id);
			if(c[i].id) {
				ids[count] = c[i].id;
				count++;
			}
		}
		console.log('数量' + count + '/' + ids.length + '=======================' + c.length);

		var textLength = $('#' + startId).text().length;
        var range1 = document.createRange();
        range1.setStart(startElement.firstChild, startOffset);
        range1.setEnd(startElement.firstChild, textLength);
        var text1 = range1.toString();
        var contents1 = startElement.innerHTML;
        //startElement.innerHTML = contents1.split(text1).join('<span style="background:red;color:white;"' + 'id=' + "\"" + startId + "_select" + "\"" + '>' + text1 + '</span>');
        startElement.innerHTML = contents1.replaceAt(startId, startOffset, text1);

        var range2 = document.createRange();
        range2.setStart(endElement.firstChild, 0);
        range2.setEnd(endElement.firstChild, endOffset);
        var text2 = range2.toString();
        var contents2 = endElement.innerHTML;
        //endElement.innerHTML = contents2.split(text2).join('<span style="background:red;color:white;"' + 'id=' + "\"" + endId + "_select" + "\"" + '>' + text2 + '</span>');
        endElement.innerHTML = contents2.replaceAt(endId, 0, text2);

		if (ids.length > 2) {
			for(i = 1; i < ids.length -1; i++) {
				// 中间的;
				var id = ids[i];
				var element = document.getElementById(id);
				var textLength = $('#' + id).text().length;
				var range = document.createRange();
				range.setStart(element.firstChild, 0);
				range.setEnd(element.firstChild, textLength);
				var text = range.toString();
				var contents = element.innerHTML;
				//element.innerHTML = contents.split(text).join('<span style="background:red;color:white;"' + 'id=' + "\"" + id + "_select" + "\"" + '>' + text + '</span>');
                element.innerHTML = contents.replaceAt(id, 0, text);
			}
		}
	}
}

// 开始长按标记范围初始化
function startMark(x, y) {
    var s = window.getSelection();
    s.removeAllRanges();
    var startRange = document.caretRangeFromPoint(x - 40, y);// 此处减去40是为了用户体验
    var endRange = document.caretRangeFromPoint(x + 40, y);

    var range = document.createRange();
    range.setStart(startRange.startContainer, startRange.startOffset);
    range.setEnd(endRange.startContainer, endRange.startOffset);
    //s.removeAllRanges();
    s.addRange(range);
}

// 开始标记
function getRange() {
    var s = window.getSelection();
    if (s && s.rangeCount > 0) {
        var range = s.getRangeAt(0);
        var startContainer = range.startContainer;
        var startOffset = range.startOffset;
        var startId = startContainer.parentElement.id;
        var endContainer = range.endContainer;
        var endOffset = range.endOffset;
        var endId = endContainer.parentElement.id;
        console.log(startId + "==" + startOffset + "==" + endId + "==" + endOffset);
        window.android.startActivity(startId, startOffset, endId, endOffset);
    }
}

// 选中区域变化监听
function selectionChangeListen() {
    var s = window.getSelection();
    if (s && s.rangeCount > 0) {
        var range = s.getRangeAt(0);
		if (range.getClientRects){
		    // 起始位置坐标
			//range.collapse(false);
			startRects = range.getClientRects();
			if (startRects.length > 0) {
				rect = startRects[0];
			}
			if(rect){
				l = rect.left;
				t = rect.top;
			}
			// 结束位置坐标
			range.collapse(false);
			endRects = range.getClientRects();
			if (endRects.length > 0) {
				rect = endRects[0];
			}
			if(rect){
				r = rect.right;
				b = rect.bottom;
			}
            var handleBounds = {"left": l,
                         "top": t,
                         "right": r,
                         "bottom": b };
            window.android.move(JSON.stringify(handleBounds));
        }
   } else {
     window.android.remove();
   }
}

// 点击删除
function isIncluded(x, y, startId, startOffset, endId, endOffset) {
    var selection = window.getSelection ();
    console.log("当前坐标：" + x + "/" + y);
    var secondSenRange = document.caretRangeFromPoint(x, y);
    var currentId = secondSenRange.startContainer.parentElement.id;
    console.log("当前选中id" + currentId);
    console.log("当前选中id" + secondSenRange.startOffset + "====" + secondSenRange.endOffset);
    var ttt = currentId.indexOf("_select");
    if (ttt > -1) {
        console.log(ttt);
        window.android.showDeleteMenu();
        // TODO 这里弹出删除按钮
        console.log("红色区域id个数" + $("[id$=select]").size());

        // 删除标记
        $("[id$=select]").each(function(){
            //$(this).replaceWith($(this).html());
            var parentHtml = $(this).parent().html();
            var text = $(this).html();
            var parentId = $(this).attr("id");
            var content = '<span style="background:red;color:white;" ' + 'id=' + "\"" + parentId + "\"" + '>' + text + '</span>';
            $(this).parent().html(parentHtml.split(content).join(text));
        });
    }
}
</script>

</html>
